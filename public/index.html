<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="login-view">
        <div class="card login-card">
            <h1 class="logo-text">Admin Login</h1>
            <p>请登录以管理 AI 助手配置。</p>
            <form id="login-form">
                <input type="text" id="username" name="username" placeholder="用户名 (Admin Username)" required>
                <input type="password" id="password" name="password" placeholder="密码 (Password)" required>
                <button type="submit" class="submit-button">登 录</button>
            </form>
        </div>
    </div>

    <div id="main-view" style="display: none;">
        
        <div class="sidebar">
            <div class="logo-text mini">AI Assistant</div>
            <button id="new-chat-button" class="sidebar-button primary">
                + 新建对话 (Reset Context)
            </button>
            <button id="show-config-button" class="sidebar-button secondary">
                ⚙️ 配置管理
            </button>
            <button id="logout-button" class="sidebar-button secondary" style="display: none;">
                🚪 登出
            </button>
        </div>

        <div class="chat-area">
            <div id="chat-container" class="chat-container">
                </div>

            <div class="input-area">
                <textarea id="message-input" placeholder="输入你的问题... (Shift+Enter 换行, Enter 发送)"></textarea>
                <button id="send-button" class="send-button">发送</button>
            </div>
        </div>

        <div id="admin-panel" class="modal-overlay" style="display: none;">
            <div class="card admin-card">
                <h2 class="neon-title">⚙️ AI 助手配置</h2>
                <span id="close-config-button" class="close-button">&times;</span>
                <form id="config-form">
                    
                    <div class="input-group">
                        <label for="assistant-name">助手名称 (Assistant Name)</label>
                        <input type="text" id="assistant-name" name="name" placeholder="例如：Grok 模仿者" required>
                    </div>

                    <div class="input-group">
                        <label for="api-endpoint">AI API 端点 (Endpoint URL)</label>
                        <input type="url" id="api-endpoint" name="apiEndpoint" 
                               placeholder="例如：https://api.x.ai/v1/chat/completions" 
                               required>
                        <small>填写完整的 POST 请求 URL，例如 X.ai 的 Chat Completions 端点。</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="api-key">API Key (认证密钥)</label>
                        <input type="password" id="api-key" name="apiKey" placeholder="例如：您的 XAI_API_KEY" required>
                        <small>请填写用于 Bearer 认证的密钥/Token。</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="model-name">模型名称 (Model Name)</label>
                        <input type="text" id="model-name" name="model" placeholder="例如：grok-4" required>
                        <small>请填写 AI 服务要求使用的准确模型名称。</small>
                    </div>

                    <div class="input-group">
                        <label for="temperature">温度设置 (Temperature)</label>
                        <input type="number" id="temperature" name="temperature" step="0.01" min="0" max="2" value="0.7" required>
                        <small>控制回复的随机性。值越高越有创造力 (通常 0.0 到 1.0)。</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="system-instruction">风格指令 (System Instruction)</label>
                        <textarea id="system-instruction" name="systemInstruction" placeholder="定义 AI 助手的风格，例如：你是一个幽默风趣、说话简洁的 AI 助手。" required></textarea>
                        <small>此指令将作为 System 消息发送给 AI。</small>
                    </div>

                    <button type="submit" class="submit-button">保存配置</button>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
